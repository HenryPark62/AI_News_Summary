<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>News.ai</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

<div class="container">
    <h1><span id="news-icon">ğŸ“°</span> News.ai</h1>
    <h3 id="typing-text"><span id="typed-text"></span><span id="cursor">|</span></h3>

    <form method="POST" enctype="multipart/form-data" action="/start-summary" id="summary-form">

        <!-- 1ë‹¨ê³„: ìš”ì•½ ëª¨ë¸ ì„ íƒ (ì²˜ìŒë¶€í„° ë³´ì„) -->
        <div class="fade-step show" id="step-1">
            <h3>ğŸ§  ìš”ì•½ ëª¨ë¸ ì„ íƒ</h3>
            <label><input type="radio" name="model" value="openai"> OpenAI GPT</label>
            <label><input type="radio" name="model" value="together"> Together.ai ë¬´ë£Œ ëª¨ë¸</label>
            <label><input type="radio" name="model" value="local"> ë¡œì»¬ LLM (ollama ë“±)</label>
        </div>

        <!-- 2ë‹¨ê³„: ìš”ì•½ ìŠ¤íƒ€ì¼ ì„ íƒ (ê¸°ë³¸ ìˆ¨ê¹€) -->
        <div class="fade-step hidden" id="step-2">
            <h3>ğŸ“ ìš”ì•½ ìŠ¤íƒ€ì¼ ì„ íƒ</h3>
            <label><input type="radio" name="style" value="brief"> ê°„ê²° ìš”ì•½ (2~3ì¤„)</label>
            <label><input type="radio" name="style" value="detailed"> ìƒì„¸ ìš”ì•½ (5~7ì¤„)</label>
        </div>

        <!-- 3ë‹¨ê³„: ë‰´ìŠ¤ ì…ë ¥ ì„ íƒ (ê¸°ë³¸ ìˆ¨ê¹€) -->
        <div class="fade-step hidden" id="step-3">
            <h3>ğŸ“° ë‰´ìŠ¤ ì…ë ¥</h3>
            <div class="input-choice">
                <div class="upload-area">
                    <h4>ğŸ“‚ íŒŒì¼ ì—…ë¡œë“œ (.txt)</h4>
                    <input type="file" name="file" accept=".txt">
                </div>

                <div class="textarea-area">
                    <h4>âœï¸ í…ìŠ¤íŠ¸ ì§ì ‘ ì…ë ¥</h4>
                    <textarea name="text_content" rows="6" placeholder="ë‰´ìŠ¤ ë³¸ë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                </div>
                <!-- íŒŒì¼ ì—…ë¡œë“œ ì´ë¦„ í‘œì‹œìš© -->
                <div id="file-name" class="file-name"></div>

                <!-- í…ìŠ¤íŠ¸ ì…ë ¥ ê¸€ììˆ˜ í‘œì‹œìš© -->
                <div id="text-count" class="text-count">0ì ì…ë ¥ë¨</div>
            </div>
        </div>

        <!-- ìµœì¢… ìš”ì•½ ì‹œì‘ ë²„íŠ¼ -->
        <div class="start-btn">
            <button type="submit" id="start-button" disabled>ğŸš€ ìš”ì•½ ì‹œì‘</button>
        </div>

    </form>

<script src="{{ url_for('static', filename='js/validate.js') }}"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const textContainer = document.getElementById('typed-text');
    const texts = [
        "AIê°€ ì½ê³ , ë‹¹ì‹ ì€ ì´í•´ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.",
        "ë‰´ìŠ¤ë¥¼ ë” ë¹ ë¥´ê²Œ!",
        "ì´í•´ë§Œ í•˜ë©´ ë!",
        "ë‹¹ì‹ ì˜ ì‹œê°„ì€ ì†Œì¤‘í•©ë‹ˆë‹¤.",
        "í•µì‹¬ë§Œ ê³¨ë¼ì£¼ëŠ” AI ìš”ì•½",
        "ë‰´ìŠ¤, ë” ì´ìƒ ê¸¸ê²Œ ì½ì§€ ë§ˆì„¸ìš”",
        "ë°”ìœ ë‹¹ì‹ ì„ ìœ„í•œ ì´ˆê°„í¸ ìš”ì•½",
        "ì½ëŠ” ë° 1ë¶„, ì´í•´ëŠ” 10ì´ˆ",
        "ë³µì¡í•œ ë‰´ìŠ¤, ì‰½ê³  ë¹ ë¥¸ ì´í•´",
        "ì¤‘ìš”í•œ ì •ë³´ë§Œ í•œëˆˆì—",
        "News.aiê°€ í•µì‹¬ì„ ë½‘ì•„ë“œë¦½ë‹ˆë‹¤!"

    ];
    let currentText = "";
    let charIndex = 0;
    let isDeleting = false;

    function getRandomSpeed(min, max) {
        return Math.random() * (max - min) + min;
    }

    function pickRandomText() {
        const randomIndex = Math.floor(Math.random() * texts.length);
        return texts[randomIndex];
    }

    function typeEffect() {
        if (!currentText) {
            currentText = pickRandomText();
        }

        if (!isDeleting) {
            // ìƒˆ ê¸€ì ì¶”ê°€
            const nextChar = currentText.charAt(charIndex);
            const span = document.createElement('span');
            span.textContent = nextChar;
            span.classList.add('fade-in-char');
            textContainer.appendChild(span);
            charIndex++;

            if (charIndex === currentText.length) {
                isDeleting = true;
                setTimeout(typeEffect, 1200); // ë‹¤ íƒ€ì´í•‘í•˜ë©´ ì ê¹ ë©ˆì¶¤
                return;
            }
        } else {
            // ì‚­ì œëŠ” ë§ˆì§€ë§‰ ê¸€ì í•˜ë‚˜ ì œê±°
            if (textContainer.lastChild) {
                textContainer.removeChild(textContainer.lastChild);
            }
            charIndex--;

            if (charIndex === 0) {
                isDeleting = false;
                currentText = pickRandomText();
            }
        }

        const speed = isDeleting ? 40 : getRandomSpeed(80, 150);
        setTimeout(typeEffect, speed);
    }

    typeEffect();
});
</script>
</div>

</body>
</html>